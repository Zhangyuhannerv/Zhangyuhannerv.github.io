<!DOCTYPE html><html lang="en" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>ZhangYuhanのblog - ಠ_ಠ</title><meta name="author" content="ZhangYuhan"><meta name="copyright" content="ZhangYuhan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="Record the growth and learning process">
<meta property="og:type" content="website">
<meta property="og:title" content="ZhangYuhanのblog">
<meta property="og:url" content="https://zhangyuhan.netlify.app/page/6/index.html">
<meta property="og:site_name" content="ZhangYuhanのblog">
<meta property="og:description" content="Record the growth and learning process">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://zhangyuhan.netlify.app/img/theme/shenhe.jpg">
<meta property="article:author" content="ZhangYuhan">
<meta property="article:tag" content="blog,java,js,日本语">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zhangyuhan.netlify.app/img/theme/shenhe.jpg"><link rel="shortcut icon" href="/img/theme/favicon.ico"><link rel="canonical" href="https://zhangyuhan.netlify.app/page/6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ZhangYuhanのblog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-12-25 10:47:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/modify.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/card.css"><link rel="stylesheet" href="/css/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="ZhangYuhanのblog" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/theme/shenhe.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">209</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">272</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">67</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="ZhangYuhanのblog"><img class="site-icon" src="/img/theme/logo.png"/></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">ZhangYuhanのblog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/zhangyuhannerv" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:zhangyuhannerv@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/2714.html" title="开启gzip配置">开启gzip配置</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/nginx/">nginx</a></span></div><div class="content">配置示例
server&#123;        listen 9005; ## nginx监听端口号        #开启gzip        gzip  on;        #vary header支持，该选项可以让前端的缓存服务器缓存经过gzip压缩的页面        gzip_vary on;        #设置允许压缩的页面最小字节数，页面字节数从header头的Content-Length中获取，默认值是0，不管页面是多大都进行压缩，建议设置成大于1K，如果小于1K可能会越压越大        gzip_min_length 612k;        #压缩缓冲区大小，表示申请4个单位为16K的内存作为压缩结果的流缓存，默认值是申请与原始数据大小相同的内存空间来存储gzip压缩结果        gzip_buffers 128 128k;        #压缩比率，用来指定gzip压缩比， 1：压缩比最小，速度最快；9：压缩比最大，传输速度最快，但处理也最慢，也比较的消耗CPU资源        gzip_comp_level 9;        #用来指定压缩的 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/48396.html" title="windows根据端口杀进程">windows根据端口杀进程</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/windows/">windows</a></span></div><div class="content">以 8088 端口为例：
netstat  -aon|findstr &quot;8088&quot;
最后一列是 pid。假设为 5544
taskkill /pid 5544 -t -f
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/47689.html" title="配置文件下载，开启文件浏览列表">配置文件下载，开启文件浏览列表</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/nginx/">nginx</a></span></div><div class="content">文件存储配置文件
server &#123;        listen       80;        location /app &#123;            alias /usr/local/webserver/nginx/app/;            autoindex on;            #下面这个配置开不开启效果是一样的            #我还没发现有什么用            #建议先不加。            #猜测的应用场景：在网页上文件浏览时点击图片要求下载而不是预览就要打开下面的配置			#default_type application/octet-stream;        &#125;    &#125;
alias 指定虚拟目录autoindex on;打开目录浏览功能
假设服务器 ip 为 192.168.10.234那么访问 192.168.10.234:80/app/cgjc.apk 就能直接下载文件那么访问 192.168.10.234:80/app/cgjc-test.apk 就能直接下载文件
访问 192.16 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/12146.html" title="解决单页面应用，刷新后出现404或者404的错误">解决单页面应用，刷新后出现404或者404的错误</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/nginx/">nginx</a></span></div><div class="content">在 location 里加上 try_files $uri $uri/ /index.html;
具体配置如下：
server &#123;    listen       81;    server_name  project_mall;    #charset koi8-r;    #access_log  logs/host.access.log  main;    location / &#123;    root   study/project_mall;    index  index.html index.htm;    # 解决单页面应用刷新出现403或者404错误    try_files  $uri $uri/ /index.html;    &#125;&#125;</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/1561.html" title="部署前端项目">部署前端项目</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/nginx/">nginx</a></span></div><div class="content">前端项目存储位置/usr/local/webserver/nginx/project/crtoms
配置 0（推荐）
server&#123;        listen 9005; ## nginx监听端口号        location / &#123;                root project/crtoms; # project在ngxin目录下，和html同级                try_files $uri $uri/ /index.html;        &#125;        # 前端代理        location /api/ &#123; #api是同一请求后缀             proxy_pass http://192.168.10.235:8888/; #后台内网地址        &#125;&#125;
假设服务器 ip 为 192.168.10.234那么此时访问方式就是 http:192.168.10.234:9095/
配置 1
server&#123;        listen 9005; ## nginx ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/26055.html" title="部署java项目">部署java项目</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/JAVA/">JAVA</a></span></div><div class="content">将运行的 jar 错误日志信息输出到 log.file 文件中，然后（&gt;&amp;1）就是继续输出到标准输出(前面加的&amp;，是为了让系统识别是标准输出)，最后一个&amp;,表示在后台运行。
nohup java -jar 包名.jar  &gt; log.file  2&gt;&amp;1 &amp;[1] 669 #669表示运行的pid</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/13230.html" title="收藏">收藏</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/nginx/">nginx</a></span></div><div class="content">Nginx 一网打尽：动静分离、压缩、缓存、黑白名单、跨域、高可用、性能优化…https://mp.weixin.qq.com/s/YhFaKTg5ZbzM8mkhclUnvQ
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/28105.html" title="linux修改jar包文件">linux修改jar包文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/JAVA/">JAVA</a></span></div><div class="content">
使用 jar tvf jar 名称 | grep 目标文件名 查询出目标文件在 war 包中的目录
使用 jar xvf jar 名称 目标文件名(copy 上面查出的全路径) 将目标文件及所在 war 包中的目录解压到当前路径
修改目标文件的内容，或者将要新的目标文件替换掉提取出来的目标文件
使用 jar uvf jar 名称 目标文件名（和步骤（2）中的目标文件名相同） 将新目标文件替换到 jar 包中

1、具体这里以 blog.jar 为例进行操作
1、首先，查找你需要修改的文件
jar tvf blog-0.0.1-SNAPSHOT.jar | grep _fragments.html
2、解压文件到当前目录（会是个文件夹，但是不用管文件夹的其他文件，只找我们要改的文件）
jar -xvf blog-0.0.1-SNAPSHOT.jar BOOT-INF/classes/templates/_fragments.html

3、如果你有替换的文件就直接替换，没有则修改你需要修改的部分
vim _fragments.htmlcp 文件 目标文件
4、将修改的新文件替换到 ja ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/20491.html" title="配置视频播放">配置视频播放</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Ops/">Ops</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Ops/nginx/">nginx</a></span></div><div class="content">前提：nginx 需要安装 mp4 模块假设服务器 ip 为 192.168.10.234
播放 mp4 视频server &#123;       listen       80;       location /securityMp4 &#123;           alias /home/DevelopKit/FILE/securityFile/;           mp4;           mp4_buffer_size       1m;           mp4_max_buffer_size   2000m;           # mp4_limit_rate        on;           # mp4_limit_rate_after  30s;           limit_rate 260k;           limit_rate_after 3m;       &#125;&#125;
假设存在文件/home/DevelopKit/FILE/securityFile/a.mp4那么访问 192.168.10.234:80/securit ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/11739.html" title="批量删除特定前缀key">批量删除特定前缀key</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/redis/">redis</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/redis/redis-cli/">redis-cli</a></span></div><div class="content">redis-cli --scan --pattern &quot;ops-coffee-*&quot; | xargs -L 2000 redis-cli del
其中 xargs -L 指令表示 xargs 一次读取的行数，也就是每次删除的 key 数量，一次读取太多 xargs 会报错
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/50126.html" title="常用api总结">常用api总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/redis/">redis</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/redis/ResidTemplate/">ResidTemplate</a></span></div><div class="content">XXXTemplate 是 Spring 的一大设计特色，其中，RedisTemplate 功能是提供对 Redis 的支持。
RedisTemplate 是 Spring Boot 访问 Redis 的核心组件，是 SpringBoot 集成 Redis 的客户端方式。它的底层通过 RedisConnectionFactory 对多种 Redis 驱动进行集成，上层通过 XXXOperations 提供丰富的 API，并结合 Spring 基于泛型的 bean 注入，未开发提供了极大的便利。
一、Redis 常用的数据类型String：字符串类型，可以存储多种类型，如：字符串，JSON 串，二进制，序列化对象等；Hash：key-value 结构，就像 Java 里的 Map，特别适合存储对象；List：双端链表的结构，即可以作为栈，又可以作为队列，可以进行集合的头部或者尾部添加删除元素；Set：Set 集合是 String 类型的无序集合，通过 hashtable 实现，可以对集合取交集，并集，差集；Sorted set：是 String 类型的有序集合，并且，每个元素都会关联一个 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/59400.html" title="存储zset的写法">存储zset的写法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/redis/">redis</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/redis/ResidTemplate/">ResidTemplate</a></span></div><div class="content">ZSetOperations zSetOperations = redisTemplate.opsForZSet();Set&lt;ZSetOperations.TypedTuple&lt;Map&lt;String, Double&gt;&gt;&gt; tuples = new HashSet&lt;&gt;();int cycleNum = dataShowMapper.getTrackDynamicGeometryDataNum(csrwId, xb) / 10000 + 1;// 循环次数CountDownLatch countDownLanch = new CountDownLatch(cycleNum);ExecutorService executor = Executors.newFixedThreadPool(cycleNum &gt; 4 ? 4 : cycleNum);for (int i = 0; i &lt; cycleNum; i++) &#123;  int start = i * 10000;  int num = 10000;  executor.ex ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/60348.html" title="Kafka生产者、消费者的消息可靠性方案实现">Kafka生产者、消费者的消息可靠性方案实现</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/kafka/">kafka</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/kafka/%E4%B8%8Espringboot%E7%9A%84%E6%95%B4%E5%90%88/">与springboot的整合</a></span></div><div class="content">以下代码基于 SpringKafka 2.3.13.RELEASE + Boot 2.2.9.RELEASE 实现
Producer 消息的可靠性实现方案：ack 模式调整 + 重试机制 + 规避重试机制下带来的问题
spring.kafka:	producer:      #这个参数可以是任意字符串，它是broker用来识别消息是来自哪个客户端的。在broker进行打印日志、衡量指标或者配额限制时会用到。      clientId: $&#123;spring.application.name&#125; #方便kafkaserver打印日志定位请求来源      bootstrap-servers: 127.0.0.1:8080 #kafka服务器地址，多个以逗号隔开      #acks=0：生产者把消息发送到broker即认为成功，不等待broker的处理结果。这种方式的吞吐最高，但也是最容易丢失消息的。      #acks=1：生产者会在该分区的leader写入消息并返回成功后，认为消息发送成功。如果群首写入消息失败，生产者会收到错误响应并进行重试。这种方式能够一定程度避 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/17422.html" title="SpringBoot中使用Quartz执行任务对象（job）中无法注入bean的问题">SpringBoot中使用Quartz执行任务对象（job）中无法注入bean的问题</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/quartz/">quartz</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/quartz/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/">常见问题</a></span></div><div class="content">一、问题描述SpringBoot 整合  Quartz  进行定时任务开发时，job 中注入业务 Service，使用 @Autowired 注解获取对象为 null ，执行时报空指针异常
二、分析Spring 容器可以管理 Bean，但是 Quartz 的 job 是自己管理的，job 无法被容器识别，即使在自定义的 job 上面加上@Component 注解，依然无效，原因是  job 对象在 spring 容器加载的时候，能够注入 bean，但是在调度时，job 对象会重新创建，此时就导致了已经注入的对象丢失，因此报空指针异常。
三、解决办法
3.1 采用自定义静态工具类的方式，创建 AppContextUtil 类，实现 ApplicationContextAware 接口，此工具类会在 spring 容器启动后，自动加载，使用其提供的 Bean 方法获取想要的 bean 即可，代码如下：
import lombok.extern.slf4j.Slf4j;import org.springframework.beans.BeansException;import org.spr ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/31338.html" title="stream用法整理">stream用法整理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/stream/">stream</a></span></div><div class="content">stream 流处理将用,拼接的字符串转为 Double 集合// 将用&#x27;,&#x27;拼接的字符串转为Double集合List&lt;Double&gt; singlePoint = Arrays.asList(pointStr.split(&quot;,&quot;))                                .stream()                                .map(str -&gt; Double.parseDouble(str.trim()))                                .collect(Collectors.toList());</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/59869.html" title="过滤枚举">过滤枚举</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/stream/">stream</a></span></div><div class="content">枚举类
/**     * 用户角色的枚举类     *     */public enum RoleEnum &#123;    // 仓储角色    LABORATORY_PERSON(&quot;LABORATORY_PERSON&quot;,                      &quot;实验室人员&quot;,                      &quot;365ef7b96870d8acdd4a016866193278&quot;,                      &quot;laboratoryPersonIndex.html&quot;,                      &quot;goods&quot;),    EQUIPMENT_MANAGEMENT_PERSON(&quot;EQUIPMENT_MANAGEMENT_PERSON&quot;,                                &quot;设备管理员&quot;,                                &quot;34ea46 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/38173.html" title="关于消费的同步异步问题，以及多个方法监听同一个topic">关于消费的同步异步问题，以及多个方法监听同一个topic</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/kafka/">kafka</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/kafka/%E4%B8%8Espringboot%E7%9A%84%E6%95%B4%E5%90%88/">与springboot的整合</a></span></div><div class="content">@KafkaListener(topics = &quot;test&quot;)public void consumerTest1(String msg) throws InterruptedException &#123;    log.info(&quot;收到消息1：&quot; + msg);    TimeUnit.MILLISECONDS.sleep(10);&#125;@KafkaListener(topics = &quot;test&quot;)public void consumerTest2(String msg) throws InterruptedException &#123;    log.info(&quot;收到消息2：&quot; + msg);    TimeUnit.MILLISECONDS.sleep(10);&#125;
如上所示多个方法消费同一个 topic那么，只会在一个方法中消费，不会两个方法都消费消息，即不会重复消费
同时当只有consumerTest1()方法时，如果手动阻塞线程，那么消息的消费也会变慢即如果向 test 发送 5 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/27144.html" title="word转pdf">word转pdf</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/studyEveryday/">studyEveryday</a></span></div><div class="content">
poi(慢，格式回出问题)
openOffice（单线程，不支持并发)
jacob(效果好，但是不支持 linux）
docx4j（没试过)
asposeword(效果好，块，但是付费)

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/24216.html" title="业务开发时，接口不能对外暴露的解决办法">业务开发时，接口不能对外暴露的解决办法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/studyEveryday/">studyEveryday</a></span></div><div class="content">业务开发时，接口不能对外暴露怎么办？内外网接口微服务隔离

网关 + redis 实现白名单机制
方案三 网关 + AOP
具体实操


在业务开发的时候，经常会遇到某一个接口不能对外暴露，只能内网服务间调用的实际需求。面对这样的情况，我们该如何实现呢？今天，我们就来理一理这个问题，从几个可行的方案中，挑选一个来实现。
1. 内外网接口微服务隔离将对外暴露的接口和对内暴露的接口分别放到两个微服务上，一个服务里所有的接口均对外暴露，另一个服务的接口只能内网服务间调用。
该方案需要额外编写一个只对内部暴露接口的微服务，将所有只能对内暴露的业务接口聚合到这个微服务里，通过这个聚合的微服务，分别去各个业务侧获取资源。
该方案，新增一个微服务做请求转发，增加了系统的复杂性，增大了调用耗时以及后期的维护成本。
2. 网关 + redis 实现白名单机制在 redis 里维护一套接口白名单列表，外部请求到达网关时，从 redis 获取接口白名单，在白名单内的接口放行，反之拒绝掉。
该方案的好处是，对业务代码零侵入，只需要维护好白名单列表即可；
不足之处在于，白名单的维护是一个持续性投入的工作，在很多 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/posts/9998.html" title="以特定的编码读取文件，以特定的编码写入文件">以特定的编码读取文件，以特定的编码写入文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time datetime="2023-03-06T07:47:44.000Z" title="Created 2023-03-06 15:47:44">2023-03-06</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Dev/">Dev</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/">Java</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/Dev/Java/studyEveryday/">studyEveryday</a></span></div><div class="content">以下代码是针对 BufferedReader 和 BufferedWriter 的
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(new FileInputStream(inF),&quot;GB2312&quot;));// 以GB2312的编码读文件BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(outFile), StandardCharsets.UTF_8));// 以utf-8写文件</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/5/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/#content-inner">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><a class="extend next" rel="next" href="/page/7/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/theme/shenhe.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">ZhangYuhan</div><div class="author-info__description">(o゜▽゜)o☆[BINGO!]</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">209</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">272</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">67</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://twitter.com/ayanamiichi"><i class="fa-brands fa-twitter"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/zhangyuhannerv" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:zhangyuhannerv@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Welcome to my blog, here is a summary of my daily study and life collected and organized, I hope it can be helpful to you ^_^</div></div><div class="sticky_layout"><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">209</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2023-01-31T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">107k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-12-25T02:47:30.094Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div><div class="card-widget user-map" id="user-map"><div class="item-headline"><i class="fas fa-heartbeat"></i><span>visitor map</span></div><div class="item-content"><script type="text/javascript" id="clstr_globe" src="//clustrmaps.com/globe.js?d=5V2tOKp8qAdRM-i8eu7ETTO9ugt5uKbbG-U7Yj8uMl8"></script></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By ZhangYuhan</div><div class="footer_custom_text">Hi, welcome to my blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["人の梦は终わらねエ"])
  } else {
    document.getElementById("subtitle").innerHTML = '人の梦は终わらねエ'
  }
}
typedJSFn.run(subtitleType)</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script><script type="text/javascript" src="/js/dynamicBg.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>